# PRODUCTION Environment Variables Template
# Copy this file to .env.production and fill in your production values
# NEVER commit .env files to version control

# ==================================================
# CRITICAL SECURITY SETTINGS
# ==================================================

# Database Configuration (Use connection pooling in production)
DATABASE_URL=postgresql://username:password@host:5432/database_name

# Server Configuration
NODE_ENV=production
PORT=5000

# ‚ö° SpaceKo Production Environment Configuration
# Copy this file to .env.production and fill in your actual values

# ========================================
# üîí SECURITY CONFIGURATION (CRITICAL)
# ========================================

# JWT & Session Secrets (GENERATE UNIQUE VALUES!)
# Use: openssl rand -base64 32
JWT_SECRET=REPLACE_WITH_32_CHAR_RANDOM_STRING
SESSION_SECRET=REPLACE_WITH_32_CHAR_RANDOM_STRING

# ========================================
# üåç ENVIRONMENT & SERVER
# ========================================

NODE_ENV=production
PORT=5000
FORCE_HTTPS=true

# ========================================
# üóÑÔ∏è DATABASE CONFIGURATION
# ========================================

# PostgreSQL Connection
DATABASE_URL=postgresql://username:password@host:5432/database_name
DB_SSL_MODE=require
DB_CONNECTION_TIMEOUT=10000
DB_MAX_CONNECTIONS=20
DB_IDLE_TIMEOUT=30000

# ========================================
# üõ°Ô∏è CORS & SECURITY HEADERS
# ========================================

# Allowed Origins (comma-separated)
ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# Content Security Policy
CSP_POLICY=default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; connect-src 'self'

# ========================================
# ‚ö° RATE LIMITING
# ========================================

# General API rate limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Authentication rate limiting (stricter)
AUTH_RATE_LIMIT_WINDOW_MS=900000
AUTH_RATE_LIMIT_MAX=5

# ========================================
# üîê SSL/TLS CONFIGURATION (Optional)
# ========================================

# SSL Certificate paths (if using custom certificates)
SSL_CERT_PATH=/path/to/ssl/certificate.pem
SSL_KEY_PATH=/path/to/ssl/private-key.pem

# ========================================
# üìä MONITORING & LOGGING
# ========================================

# Logging level (error, warn, info, debug)
LOG_LEVEL=info

# Health check configuration
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PATH=/health

# Sentry error tracking (optional)
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# ========================================
# üì¶ REDIS CONFIGURATION (Optional)
# ========================================

# Redis for session storage
REDIS_URL=redis://localhost:6379
REDIS_SESSION_PREFIX=spaceko:sess:

# ========================================
# ‚òÅÔ∏è CLOUD PROVIDER SPECIFIC
# ========================================

# AWS Configuration (if using AWS)
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=your-access-key
AWS_SECRET_ACCESS_KEY=your-secret-key

# Heroku specific (if using Heroku)
HEROKU_APP_NAME=your-app-name

# ========================================
# üöÄ DEPLOYMENT CONFIGURATION
# ========================================

# Build configuration
BUILD_TIMEOUT=600
VITE_BUILD_OUTDIR=dist

# Process management
PM2_INSTANCES=max
PM2_MAX_MEMORY_RESTART=500M

# ========================================
# üìß EMAIL CONFIGURATION (Optional)
# ========================================

# Email service for notifications
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@domain.com
SMTP_PASS=your-email-password
FROM_EMAIL=noreply@yourdomain.com

# ========================================
# üîî WEBHOOK CONFIGURATION (Optional)
# ========================================

# Slack/Discord webhooks for alerts
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/your/webhook/url
DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/your/webhook/url

# ========================================
# üõ†Ô∏è DEVELOPMENT OVERRIDES
# ========================================

# Feature flags for production
FEATURE_SUPER_ADMIN=true
FEATURE_RESOURCE_REPORTING=true
FEATURE_COMMUNITY_SPOTLIGHT=true

# Debug flags (should be false in production)
DEBUG_SQL_QUERIES=false
DEBUG_AUTH_TOKENS=false
DEBUG_CORS_REQUESTS=false

# ========================================
# üì± MOBILE APP CONFIGURATION (Future)
# ========================================

# Mobile app API keys (if applicable)
MOBILE_API_VERSION=v1
MOBILE_APP_SECRET=your-mobile-app-secret

# ========================================
# üß™ TESTING CONFIGURATION
# ========================================

# Test database (for running tests in production environment)
TEST_DATABASE_URL=postgresql://test_user:test_pass@localhost:5432/spaceko_test

# ========================================
# üíæ BACKUP CONFIGURATION
# ========================================

# Backup storage configuration
BACKUP_ENABLED=true
BACKUP_INTERVAL=24h
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=spaceko-backups

# ========================================
# üîç ANALYTICS (Optional)
# ========================================

# Google Analytics
GA_TRACKING_ID=UA-XXXXXXXXX-X

# Application insights
APP_INSIGHTS_KEY=your-app-insights-key

# ========================================
# üåê CDN CONFIGURATION (Optional)
# ========================================

# CDN for static assets
CDN_URL=https://cdn.yourdomain.com
STATIC_ASSETS_VERSION=1.0.0

# ========================================
# üîí SECURITY ADDITIONAL
# ========================================

# Security scan configuration
SECURITY_SCAN_ENABLED=true
VULNERABILITY_SCAN_SCHEDULE=0 2 * * *

# IP whitelist for admin functions (comma-separated)
ADMIN_IP_WHITELIST=127.0.0.1,your.admin.ip.address

# ========================================
# ‚öôÔ∏è PERFORMANCE TUNING
# ========================================

# Memory limits
MAX_MEMORY_USAGE=512M
GARBAGE_COLLECTION_INTERVAL=30000

# Request timeouts
REQUEST_TIMEOUT=30000
KEEP_ALIVE_TIMEOUT=5000

# ========================================
# üö® EMERGENCY CONFIGURATION
# ========================================

# Emergency maintenance mode
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE=We are currently performing maintenance. Please try again later.

# Emergency contact
EMERGENCY_CONTACT_EMAIL=admin@yourdomain.com
EMERGENCY_CONTACT_PHONE=+1234567890

# ========================================
# üìù NOTES & REMINDERS
# ========================================

# 1. Generate unique JWT_SECRET and SESSION_SECRET using: openssl rand -base64 32
# 2. Replace all placeholder values with your actual configuration
# 3. Never commit this file to version control
# 4. Rotate secrets regularly (monthly recommended)
# 5. Test configuration with ./security-check.sh before deployment
# 6. Keep backup of this configuration in secure location
# 7. Monitor logs after deployment for any configuration issues
# 8. Set up alerts for critical configuration changes

# Rate Limiting Configuration
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
AUTH_RATE_LIMIT_MAX=5

# Logging Configuration
LOG_LEVEL=info
LOG_FILE_PATH=./logs/app.log

# CORS Configuration (Add your production domains)
ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# SSL Configuration (for HTTPS in production)
SSL_CERT_PATH=/path/to/ssl/cert.pem
SSL_KEY_PATH=/path/to/ssl/key.pem
FORCE_HTTPS=true

# Database Security
DB_SSL_MODE=require
DB_CONNECTION_TIMEOUT=10000
DB_IDLE_TIMEOUT=30000
DB_MAX_CONNECTIONS=20

# Security Headers
CSP_POLICY=default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self' data:; connect-src 'self' https:;
HSTS_MAX_AGE=31536000

# Session Management
SESSION_TIMEOUT=3600
REFRESH_TOKEN_EXPIRY=604800

# Monitoring & Observability
SENTRY_DSN=your-sentry-dsn-here
HEALTH_CHECK_ENABLED=true

# Cloud Provider Configuration
CLOUD_PROVIDER=aws
AWS_REGION=us-east-1
AZURE_REGION=eastus
GCP_REGION=us-central1

# Database Backup (Production)
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30

# ==================================================
# DEVELOPMENT OVERRIDES (for local development)
# ==================================================

# Uncomment and modify for local development
# NODE_ENV=development
# LOG_LEVEL=debug
# FORCE_HTTPS=false
# CSP_POLICY=default-src 'self' 'unsafe-inline' 'unsafe-eval'; connect-src 'self' ws: wss:;
